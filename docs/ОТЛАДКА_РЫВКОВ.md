# –û—Ç–ª–∞–¥–∫–∞ —Ä—ã–≤–∫–æ–≤ –∂—É–∫–∞ –∏ –ø–∞—É–∫–∞

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

### 1. `src/systems/core/AICoordinator.js`
- –õ–æ–≥–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤—Ä–∞–≥–∞ –≤ —Ä–∞–¥–∏—É—Å –∞—Ç–∞–∫–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ø—ã—Ç–∫–∏ –∞—Ç–∞–∫–∏ (—É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á–∞ –∏–∑-–∑–∞ cooldown)
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–µ–∫—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ pathfinding (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏, –Ω–∞–π–¥–µ–Ω –ª–∏ –ø—É—Ç—å)
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è

### 2. `src/systems/core/MovementSystem.js`
- –í—ã–∑–æ–≤ `moveAlongPath()` —Å –¥–ª–∏–Ω–æ–π –ø—É—Ç–∏ –∏ –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–æ–π
- –í—ã–∑–æ–≤ `moveTo()` —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —Ü–µ–ª–∏
- –ü–µ—Ä–µ–¥–∞—á–∞ —Ü–µ–ª–∏ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–≤–∏–∂–µ–Ω–∏—è

### 3. `src/systems/strategies/movement/LinearMovementStrategy.js`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ü–µ–ª–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –†–∞—Å—á–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –¥–æ —Ü–µ–ª–∏ –∏ effectiveRange
- **–ö–ª—é—á–µ–≤–æ–µ**: –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏

## –ö–ª—é—á–µ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞

**–ü—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ `LinearMovementStrategy.isTargetReached()`:**

–ö–æ–≥–¥–∞ –∂—É–∫ –∏–ª–∏ –ø–∞—É–∫ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–∞–¥–∏—É—Å –∞—Ç–∞–∫–∏:
1. `AICoordinator` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç cooldown ‚Üí –Ω–µ –ø—Ä–æ—à–µ–ª
2. –ì–æ–≤–æ—Ä–∏—Ç "–ø—Ä–æ–¥–æ–ª–∂–∞–π –¥–≤–∏–∂–µ–Ω–∏–µ" –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `moveTo()`
3. –ù–û –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –∫–∞–¥—Ä–µ `LinearStrategy.update()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `isTargetReached()`
4. `isTargetReached()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `effectiveAttackRange()` (–≤—Ä–∞–≥ —É–∂–µ –≤ —Ä–∞–¥–∏—É—Å–µ!)
5. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç `stopMovement()`
6. –í—Ä–∞–≥ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ cooldown –Ω–µ –ø—Ä–æ–π–¥–µ—Ç

–ú—É—Ä–∞–≤–µ–π –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–µ–≥–æ **–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π `attack.range=-5`**, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Å–∞—Ç—å—Å—è —è–π—Ü–∞, —á—Ç–æ–±—ã –∞—Ç–∞–∫–æ–≤–∞—Ç—å.

–£ –∂—É–∫–∞ `attack.range=35`, —É –ø–∞—É–∫–∞ `attack.range=0`, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –±–æ–ª—å—à–∏–π `effectiveRange` –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞–º.

## –ß—Ç–æ –ø–æ–∫–∞–∂—É—Ç –ª–æ–≥–∏

–ò—â–∏—Ç–µ —ç—Ç—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```
üêû [beetle] –í —Ä–∞–¥–∏—É—Å–µ –∞—Ç–∞–∫–∏! –ü—ã—Ç–∞–µ–º—Å—è –∞—Ç–∞–∫–æ–≤–∞—Ç—å...
üêû [AttackSystem] ‚è≥ Cooldown –Ω–µ –ø—Ä–æ—à–µ–ª: 2500ms / 5000ms
üêû [beetle] –†–µ–∑—É–ª—å—Ç–∞—Ç –∞—Ç–∞–∫–∏: ‚ùå –ù–ï–£–î–ê–ß–ê (–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ, doAttack=false)
üêû [beetle] üìç –ö–û–î –î–û–®–ï–õ –î–û –°–ï–ö–¶–ò–ò –î–í–ò–ñ–ï–ù–ò–Ø
üêû [beetle] üó∫Ô∏è –ò–°–ü–û–õ–¨–ó–£–ï–ú PATHFINDING
üêû [beetle] –ü–æ–∏—Å–∫ –ø—É—Ç–∏: –Ω–∞–π–¥–µ–Ω (X —Ç–æ—á–µ–∫)
üêû [beetle] ‚úÖ –ù–ê–ß–ê–õ–ò –î–í–ò–ñ–ï–ù–ò–ï –ü–û –ü–£–¢–ò
üêû [MovementSystem] moveAlongPath –≤—ã–∑–≤–∞–Ω, –¥–ª–∏–Ω–∞ –ø—É—Ç–∏: X
üêû [MovementSystem] moveTo –≤—ã–∑–≤–∞–Ω –∫ —Ü–µ–ª–∏ (...)
üêû [LinearStrategy] moveToTarget: –¥–∏—Å—Ç–∞–Ω—Ü–∏—è=75, effectiveRange=80, targetReached=true
üêû [LinearStrategy] ‚õî –¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê - –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú–°–Ø  ‚Üê –í–û–¢ –û–ù–û!
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `‚õî –¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê - –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú–°–Ø` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ `AICoordinator` —Å–∫–∞–∑–∞–ª "–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ" ‚Äî –≥–∏–ø–æ—Ç–µ–∑–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É –≤ dev —Ä–µ–∂–∏–º–µ
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ—è–≤–ª–µ–Ω–∏—è –∂—É–∫–∞ –∏–ª–∏ –ø–∞—É–∫–∞
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∫–æ–Ω—Å–æ–ª—å—é –≤ –º–æ–º–µ–Ω—Ç —Ä—ã–≤–∫–æ–≤
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏ –ø–æ–∫–∞–∂–∏—Ç–µ –∏—Ö –º–Ω–µ

## –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –≥–∏–ø–æ—Ç–µ–∑–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—Å—è, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ `LinearMovementStrategy.isTargetReached()` –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ "–Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Ä–∞–≥ –µ—â–µ –Ω–µ –º–æ–∂–µ—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å".

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å pathfinding –¥–ª—è –≤—Ä–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–¥–∏—É—Å–µ –∞—Ç–∞–∫–∏, –Ω–æ –Ω–µ –º–æ–≥—É—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∏–∑-–∑–∞ cooldown.

