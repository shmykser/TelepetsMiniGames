# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –£–ª–µ–π –Ω–µ —Å–ø–∞–≤–Ω–∏—Ç –æ—Å (–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)

## –ü—Ä–æ–±–ª–µ–º–∞

–£–ª–µ–π (hive) –ù–ï —Å–ø–∞–≤–Ω–∏–ª –æ—Å –ø–æ –≤—Ä–µ–º–µ–Ω–∏, —Ä–∞–±–æ—Ç–∞–ª —Ç–æ–ª—å–∫–æ —Å–ø–∞–≤–Ω –ø–æ —É—Ä–æ–Ω—É.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è:
```javascript
hive: {
    attack: {
        strategy: 'spawn',
        spawnInterval: 8000
    }
}
```

## –ù–∞–π–¥–µ–Ω–æ –¢–†–ò –ø—Ä–∏—á–∏–Ω—ã

### –ü—Ä–∏—á–∏–Ω–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –≤ SystemConfig ‚úÖ
**–°—Ç–∞—Ç—É—Å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ  
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø–∞–≤–Ω–∞ –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–∏ –¥–æ `SpawnAttackStrategy`.

### –ü—Ä–∏—á–∏–Ω–∞ 2: –°—Ç—Ä–∞—Ç–µ–≥–∏—è 'static' –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞—Å—å ‚úÖ
**–°—Ç–∞—Ç—É—Å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ  
–£–ª–µ–π –ø–æ–ø–∞–¥–∞–ª –≤ –ª–æ–≥–∏–∫—É –¥–≤–∏–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

### –ü—Ä–∏—á–∏–Ω–∞ 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É update() –∏ attack() ‚ùå **–ì–õ–ê–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê**

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ**:

1. `AICoordinator.update()` –≤—ã–∑—ã–≤–∞–µ—Ç `attackSystem.update()` (—Å—Ç—Ä–æ–∫–∞ 185)
2. `AttackSystem.update()` –≤—ã–∑—ã–≤–∞–µ—Ç `strategy.update()` 
3. `SpawnAttackStrategy.update()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **spawnInterval** –∏ —Å–ø–∞–≤–Ω–∏—Ç ‚úÖ
4. –ù–û! –ó–∞—Ç–µ–º `coordinateSystems()` –≤—ã–∑—ã–≤–∞–µ—Ç `attackSystem.attack()` (—Å—Ç—Ä–æ–∫–∞ 233)
5. `AttackSystem.attack()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **cooldown** —á–µ—Ä–µ–∑ `canAttack()` ‚ùå
6. **–£ —É–ª—å—è –Ω–µ—Ç cooldown**, –ø–æ—ç—Ç–æ–º—É `canAttack()` –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å true
7. –ù–û –ø—Ä–æ–≤–µ—Ä–∫–∞ `isInRange()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false (—É–ª–µ–π –¥–∞–ª–µ–∫–æ)
8. **–ê—Ç–∞–∫–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, —Å–ø–∞–≤–Ω –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è!**

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç**: 
- `SpawnAttackStrategy.update()` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ **spawnInterval** (—Ç–∞–π–º–µ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)
- `AttackSystem.attack()` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ **cooldown** (—Ç–∞–π–º–µ—Ä —Å–∏—Å—Ç–µ–º—ã –∞—Ç–∞–∫–∏)
- –≠—Ç–æ **—Ä–∞–∑–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã** –∏ –æ–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç!

### –ü–æ—á–µ–º—É —Å–ø–∞–≤–Ω –ø–æ —É—Ä–æ–Ω—É —Ä–∞–±–æ—Ç–∞–ª?

```javascript
// –í Enemy.takeDamage()
if (this.damageSpawnStrategy) {
    this.damageSpawnStrategy.onDamageReceived(damage);
}
```

- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è **–Ω–∞–ø—Ä—è–º—É—é** –≤ `takeDamage()`
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** `AICoordinator.coordinateSystems()`
- **–ù–ï –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç** —Å `attack()`
- –ü–æ—ç—Ç–æ–º—É —Ä–∞–±–æ—Ç–∞–ª! ‚úÖ

## –†–µ—à–µ–Ω–∏–µ

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
coordinateSystems(time, delta) {
    const attackStrategy = attackConfig.strategy || 'simple';
    
    if (attackSystem && attackStrategy !== 'none') {
        if (!needsRangeCheck || attackSystem.isInRange()) {
            this.setState('attacking');
            attackSystem.attack(this.currentTarget); // ‚ùå –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É SpawnAttackStrategy
            return;
        }
    }
}
```

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
coordinateSystems(time, delta) {
    const attackStrategy = attackConfig.strategy || 'simple';
    
    // –î–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ 'spawn' –ù–ï –≤—ã–∑—ã–≤–∞–µ–º attack()
    // –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å–≤–æ–π update() —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ç–∞–π–º–µ—Ä–æ–º
    if (attackStrategy === 'spawn') {
        return; // ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ–º SpawnAttackStrategy —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
    }
    
    // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤—ã–∑—ã–≤–∞–µ–º attack()
    if (attackSystem && attackStrategy !== 'none') {
        if (attackSystem.isInRange()) {
            attackSystem.attack(this.currentTarget);
            return;
        }
    }
}
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã AttackSystem

#### –†–µ–∂–∏–º 1: –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π (–¥–ª—è 'spawn')
```
AICoordinator.update()
  ‚Üí systems.forEach(system.update())  // –°—Ç—Ä–æ–∫–∞ 185
    ‚Üí AttackSystem.update()
      ‚Üí SpawnAttackStrategy.update()
        ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç spawnInterval
        ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç performSpawn()
        ‚Üí —ç–º–∏—Ç–∏—Ç 'enemy:spawn'
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è**: –°–ø–∞–≤–Ω–µ—Ä—ã (—É–ª–µ–π, –ø–∞—É—á–∏—Ö–∞, –æ—Å–∞)

#### –†–µ–∂–∏–º 2: –ü–æ –∫–æ–º–∞–Ω–¥–µ (–¥–ª—è 'simple', 'singleUse', etc.)
```
AICoordinator.coordinateSystems()
  ‚Üí attackSystem.attack()  // –°—Ç—Ä–æ–∫–∞ 237
    ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç cooldown
    ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç isInRange()
    ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç performAttack()
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è**: –û–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏ (–º—É—Ä–∞–≤–µ–π, –∂—É–∫, –ø–∞—É–∫)

### –ü–æ—á–µ–º—É –¥–≤–∞ —Ä–µ–∂–∏–º–∞?

1. **–°–ø–∞–≤–Ω–µ—Ä—ã** —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Ç–∞–π–º–µ—Ä—É** (spawnInterval)
   - –ù–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ —Ü–µ–ª–∏
   - –ù–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç cooldown —Å–∏—Å—Ç–µ–º—ã –∞—Ç–∞–∫–∏
   - –ê–≤—Ç–æ–Ω–æ–º–Ω—ã

2. **–û–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏** –∞—Ç–∞–∫—É—é—Ç **–ø–æ –∫–æ–º–∞–Ω–¥–µ** –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞
   - –ó–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ —Ü–µ–ª–∏
   - –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—Ç—Å—è —Å –¥–≤–∏–∂–µ–Ω–∏–µ–º
   - –£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∏–∑–≤–Ω–µ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ—è–≤–ª–µ–Ω–∏—è —É–ª—å—è
3. **–£–ª–µ–π –¥–æ–ª–∂–µ–Ω —Å–ø–∞–≤–Ω–∏—Ç—å –æ—Å –∫–∞–∂–¥—ã–µ 8 —Å–µ–∫—É–Ω–¥!** üè†‚Üíüêù

–õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
[SPAWNDBG][hive:xxx] update: t=12000 lastSpawnTime=4000 interval=8000 spawned=0/10
[SPAWNDBG][hive:xxx] canSpawn? dt=8100>=8000, spawned=0<10, cond=true -> true
[SPAWNDBG][hive:xxx] performSpawn: count=2 range=80 type=wasp dir=circle
[SPAWNDBG][hive:xxx] spawned: +2 => total=2, lastSpawnTime=12000
```

## –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —É–ª—å—è

### 1. –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ SystemConfig
**–§–∞–π–ª**: `src/systems/core/AICoordinator.js`  
**–°—Ç—Ä–æ–∫–∏**: 44-90  
**–ß—Ç–æ**: –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### 2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ 'static'
**–§–∞–π–ª**: `src/systems/core/AICoordinator.js`  
**–°—Ç—Ä–æ–∫–∏**: 244, 265  
**–ß—Ç–æ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `'static'`

### 3. –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è 'spawn' ‚≠ê **–ö–õ–Æ–ß–ï–í–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**
**–§–∞–π–ª**: `src/systems/core/AICoordinator.js`  
**–°—Ç—Ä–æ–∫–∏**: 224-230  
**–ß—Ç–æ**: –î–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ 'spawn' –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `attack()` –≤ `coordinateSystems()`

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏—Ö –≤—Ä–∞–≥–æ–≤

### –£–ª–µ–π (hive)
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –¢–µ–ø–µ—Ä—å —Å–ø–∞–≤–Ω–∏—Ç –æ—Å –∫–∞–∂–¥—ã–µ 8 —Å–µ–∫—É–Ω–¥
- ‚úÖ –°–ø–∞–≤–Ω –ø–æ —É—Ä–æ–Ω—É –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### –ü–∞—É—á–∏—Ö–∞ (spiderQueen)
- ‚úÖ **–ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞**: –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–ø–∞–≤–Ω–∏—Ç—å –ø–∞—É–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Å–ø–∞–≤–Ω–∞

### –û—Å–∞ (wasp)
- ‚úÖ **–ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞**: –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–ø–∞–≤–Ω–∏—Ç—å —Å–Ω–∞—Ä—è–¥—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Å–ø–∞–≤–Ω–∞

### –ö—Ä–æ—Ç (mole)
- ‚úÖ **–ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç**: –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–ø–∞–≤–Ω–∏—Ç—å —Å–Ω–∞—Ä—è–¥—ã –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å–ª–æ–≤–Ω—ã–π —Å–ø–∞–≤–Ω (conditionalSpawn)

### –û–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏ (ant, beetle, spider, etc.)
- ‚úÖ **–ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã**: –ü—Ä–æ–¥–æ–ª–∂–∞—é—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∂–∏–º "–∞—Ç–∞–∫–∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ"

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ì–ª–∞–≤–Ω—ã–π —É—Ä–æ–∫**: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º —Ç–∞–π–º–µ—Ä–æ–º (spawn) –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å **–∞–≤—Ç–æ–Ω–æ–º–Ω–æ** —á–µ—Ä–µ–∑ —Å–≤–æ–π `update()`, –∞ –Ω–µ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π –≤—ã–∑–æ–≤ `attack()`.

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã AttackSystem:
1. ‚úÖ –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π (spawn) - —á–µ—Ä–µ–∑ `strategy.update()`
2. ‚úÖ –ü–æ –∫–æ–º–∞–Ω–¥–µ (simple, singleUse) - —á–µ—Ä–µ–∑ `attack()`

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —Å–≤–æ–∏–º –ø—Ä–∞–≤–∏–ª–∞–º.

