# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ (Pathfinding) –¥–ª—è –Ω–∞–∑–µ–º–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–í `config/settings.js` –≤–∫–ª—é—á–µ–Ω —Ñ–ª–∞–≥ `pathfindingEnabled: true`, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω.

```javascript
ai: {
    pathfindingEnabled: true  // ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Pathfinding

### –ö—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pathfinding

**–ù–∞–∑–µ–º–Ω—ã–µ –≤—Ä–∞–≥–∏ —Å –æ–±—Ö–æ–¥–æ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π:**
- üêú `ant` (–º—É—Ä–∞–≤–µ–π) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `linear`
- üêû `beetle` (–∂—É–∫) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `linear`
- üï∑Ô∏è `spider` (–ø–∞—É–∫) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `linear`
- üêõ `rhinoceros` (–∂—É–∫-–Ω–æ—Å–æ—Ä–æ–≥) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `inertia`
- üêå `slug` (—Å–ª–∏–∑–µ–Ω—å) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `linear`
- üêå `snail` (—É–ª–∏—Ç–∫–∞) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `shell`
- üí£ `projectile` (—Å–Ω–∞—Ä—è–¥) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `linear`

### –ö—Ç–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pathfinding

**–õ–µ—Ç–∞—é—â–∏–µ –≤—Ä–∞–≥–∏** (ignoreGroundObstacles: true):
- ü¶ü `mosquito`, `fly`, `bee`, `butterfly`, `dragonfly`
- üêù `wasp`
- üï∑Ô∏èüëë `spiderQueen`
- ü¶ó `flea`

**–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è:**
- üêÄ `mole` (–∫—Ä–æ—Ç) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `randomPoint` (—Å–≤–æ—è –ª–æ–≥–∏–∫–∞)
- üè† `hive` (—É–ª–µ–π) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `static` (–Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–π)

## –õ–æ–≥–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è pathfinding

–í `AICoordinator.shouldUsePathfinding()` pathfinding –≤–∫–ª—é—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏:

1. ‚úÖ `settings.ai.pathfindingEnabled === true`
2. ‚úÖ –°–∏—Å—Ç–µ–º–∞ pathfinding –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
3. ‚úÖ –í—Ä–∞–≥ –ù–ï –ª–µ—Ç–∞—é—â–∏–π –ò–õ–ò –ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–∞–∑–µ–º–Ω—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
4. ‚úÖ –ù–∞ —Å—Ü–µ–Ω–µ –µ—Å—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è (–∫–∞–º–Ω–∏)

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã –≤ AICoordinator

```javascript
coordinateSystems() {
    // 1. –ï—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∞—Ç–∞–∫–∏ 'spawn' - —Ä–∞–±–æ—Ç–∞–µ–º –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
    if (attackStrategy === 'spawn') {
        return;
    }
    
    // 2. –ï—Å–ª–∏ –≤—Ä–∞–≥ –≤ —Ä–∞–¥–∏—É—Å–µ –∞—Ç–∞–∫–∏ - –∞—Ç–∞–∫—É–µ–º
    if (attackSystem.isInRange()) {
        attackSystem.attack(target);
        return;
    }
    
    // 3. –î–ª—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—É–ª–µ–π) –∏ —Å–ø–∞–≤–Ω–µ—Ä–æ–≤ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
    if (movementStrategy === 'spawner' || movementStrategy === 'static') {
        return;
    }
    
    // 4. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω pathfinding - –∏—â–µ–º –ø—É—Ç—å –∏ –¥–≤–∏–≥–∞–µ–º—Å—è –ø–æ –Ω–µ–º—É
    if (pathfindingSystem && shouldUsePathfinding()) {
        const path = pathfindingSystem.findPath(target);
        if (path && path.length > 0) {
            movementSystem.moveAlongPath(path);
            return;
        } else {
            // –ü—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è (–ù–ï –∏–¥–µ–º —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è)
            movementSystem.stopMovement();
            return;
        }
    }
    
    // 5. –î–ª—è randomPoint –∏ –¥—Ä—É–≥–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
    if (movementStrategy === 'randomPoint') {
        return;
    }
    
    // 6. –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π - –ø—Ä—è–º–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏
    movementSystem.moveTo(target);
}
```

## PathfindingSystem

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∫–∏

- **–†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏**: 32 –ø–∏–∫—Å–µ–ª—è
- **–ê–ª–≥–æ—Ä–∏—Ç–º**: A* (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–î–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ**: –†–∞–∑—Ä–µ—à–µ–Ω–æ
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π**: –ö–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏**: –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–µ—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–æ–≤ —Å—Ü–µ–Ω—ã
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π**: –ö–∞–º–Ω–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∫–ª–µ—Ç–∫–∏ —Å–µ—Ç–∫–∏
   - –î–ª—è –ª–µ—Ç–∞—é—â–∏—Ö: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `affectsFlying`
   - –î–ª—è –Ω–∞–∑–µ–º–Ω—ã—Ö: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `affectsGround`
3. **–ü–æ–∏—Å–∫ –ø—É—Ç–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `pathfinding` (A*)
4. **–û–±—Ö–æ–¥ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫**: –ï—Å–ª–∏ —Å—Ç–∞—Ä—Ç/—Ñ–∏–Ω–∏—à –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, –∏—â–µ—Ç—Å—è –±–ª–∏–∂–∞–π—à–∞—è —Å–≤–æ–±–æ–¥–Ω–∞—è –∫–ª–µ—Ç–∫–∞

## –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ–±–ª–µ–º

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–∫—É—â–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

Pathfinding **–ù–ï –≤–ª–∏—è–µ—Ç** –Ω–∞:
- ‚úÖ –õ–µ—Ç–∞—é—â–∏—Ö –≤—Ä–∞–≥–æ–≤ (–æ–Ω–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –Ω–∞–∑–µ–º–Ω—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è)
- ‚úÖ –£–ª–µ–π (static - –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è)
- ‚úÖ –ö—Ä–æ—Ç–∞ (randomPoint - —Å–≤–æ—è –ª–æ–≥–∏–∫–∞)
- ‚úÖ –°–ø–∞–≤–Ω–µ—Ä–æ–≤ (spawner - —Å–≤–æ—è –ª–æ–≥–∏–∫–∞)
- ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—é –∞—Ç–∞–∫–∏ 'spawn' (–∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞)

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—É—Ç–∏

–ï—Å–ª–∏ –ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤—Ä–∞–≥ **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–¥—Ç–∏ –Ω–∞–ø—Ä–æ–ª–æ–º —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ü—É—Ç—å –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
  - –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É—Ç–∏
  - –í—Ä–∞–≥ –¥–æ—Å—Ç–∏–≥ –∫–æ–Ω—Ü–∞ –ø—É—Ç–∏
- –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã, –∞ –Ω–µ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. **–ù–∞–∑–µ–º–Ω—ã–µ –≤—Ä–∞–≥–∏ –æ–±—Ö–æ–¥—è—Ç –∫–∞–º–Ω–∏**
   - –ú—É—Ä–∞–≤—å–∏, –∂—É–∫–∏, –ø–∞—É–∫–∏ –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –≤–æ–∫—Ä—É–≥ –∫–∞–º–Ω–µ–π
   - –ü—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø—É—Ç–∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è

2. **–õ–µ—Ç–∞—é—â–∏–µ –≤—Ä–∞–≥–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –∫–∞–º–Ω–∏**
   - –û—Å—ã, –º—É—Ö–∏, –∫–æ–º–∞—Ä—ã –ª–µ—Ç—è—Ç –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –∫–∞–º–Ω–∏

3. **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –≤—Ä–∞–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ**
   - –£–ª–µ–π –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–º
   - –ö—Ä–æ—Ç –ø—Ä—ã–≥–∞–µ—Ç –ø–æ —Å–ª—É—á–∞–π–Ω—ã–º —Ç–æ—á–∫–∞–º
   - –û—Å—ã —Å–ø–∞–≤–Ω—è—Ç —Å–Ω–∞—Ä—è–¥—ã

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ù–µ—Ç –∑–∞–º–µ—Ç–Ω—ã—Ö –ª–∞–≥–æ–≤ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤—Ä–∞–≥–æ–≤
   - Pathfinding –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `config/settings.js` - –≤–∫–ª—é—á–µ–Ω `pathfindingEnabled: true`

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã, –Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã)

- `src/systems/core/AICoordinator.js` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∏ pathfinding
- `src/systems/core/PathfindingSystem.js` - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏
- `src/systems/core/MovementSystem.js` - –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ø—É—Ç–∏
- `src/types/enemyTypes.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—Ä–∞–≥–æ–≤

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **Pathfinding –≤–∫–ª—é—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

