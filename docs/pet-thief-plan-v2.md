# üéÆ –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò PET THIEF v2.0

> **–ò—Å—Ç–æ—á–Ω–∏–∫**: [Notion - Pet Thief](http://notion.so/Pet-Thief-262ac611cc1d8077a856e6971488a55f)

---

## üìñ –ö–û–ù–¶–ï–ü–¶–ò–Ø –ò–ì–†–´

**Pet Thief** - –∏–≥—Ä–∞ –æ —Ö–∏—Ç—Ä–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç–µ, –≥–¥–µ –∏–≥—Ä–æ–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç –ø–∏—Ç–æ–º—Ü–µ–º –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –º–∏—Ä–µ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö –±–∏–æ–º–æ–≤. –û—Å–Ω–æ–≤–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞: –∫—Ä–∞—Å—Ç—å —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∏–∑ –∂–∏–ª–∏—â –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –∏ –∑–∞—â–∏—â–∞—Ç—å —Å–≤–æ–π –¥–æ–º –æ—Ç –≤–æ—Ä–æ–≤.

---

## üéØ –≠–¢–ê–ü 1: –û–¢–ö–†–´–¢–´–ô –ú–ò–† –ò –ë–ê–ó–û–í–û–ï –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï

### 1.1 –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –º–∏—Ä–∞ (WorldGenerator)

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π –º–∏—Ä —Å –±–∏–æ–º–∞–º–∏

**–õ–æ–∫–∞—Ü–∏—è**: `src/systems/world/WorldGenerator.js`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ Notion**:
- –ú–∏—Ä –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- –ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–±–æ–ª—å—à–∏—Ö –ª–æ–∫–∞—Ü–∏–π —Å –∂–∏–ª–∏—â–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤
- –†–∞–∑–ª–∏—á–Ω—ã–µ –±–∏–æ–º—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏
- –°–ª—É—á–∞–π–Ω–æ –ø–æ—è–≤–ª—è—é—â–∏–µ—Å—è –∂–∏–ª–∏—â–∞ (3-8 —à—Ç—É–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –º–∏—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3000x3000 –ø–∏–∫—Å–µ–ª–µ–π)
- ‚úÖ –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–æ–º–æ–≤ (Perlin noise / Simplex noise)
- ‚úÖ –¢–∏–ø—ã –±–∏–æ–º–æ–≤:
  - `FOREST` - –ª–µ—Å (—Ç—Ä–∞–≤—è–Ω–æ–π —Ñ–æ–Ω, –¥–µ—Ä–µ–≤—å—è)
  - `DESERT` - –ø—É—Å—Ç—ã–Ω—è (–ø–µ—Å–æ–∫, –∫–∞–∫—Ç—É—Å—ã)
  - `SNOW` - —Å–Ω–µ–∂–Ω—ã–µ —Ä–∞–≤–Ω–∏–Ω—ã (—Å–Ω–µ–≥, –∫–∞–º–Ω–∏)
  - `PLAINS` - –ø–æ–ª—è (—Ç—Ä–∞–≤–∞, —Ü–≤–µ—Ç—ã)
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∂–∏–ª–∏—â –∏–≥—Ä–æ–∫–æ–≤ (3-8 —à—Ç—É–∫, —Å–ª—É—á–∞–π–Ω–æ)
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (–¥–µ—Ä–µ–≤—å—è, –∫–∞–º–Ω–∏, –∫—É—Å—Ç–∞—Ä–Ω–∏–∫–∏)
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –ø–æ –º–∏—Ä—É
- ‚úÖ Seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ (–¥–ª—è 24-—á–∞—Å–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**:
```javascript
{
  seed: '2025-10-19', // –î–∞—Ç–∞ –¥–ª—è 24-—á–∞—Å–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
  size: { width: 3000, height: 3000 },
  biomes: [
    {
      type: 'FOREST',
      polygon: [...], // –ü–æ–ª–∏–≥–æ–Ω –±–∏–æ–º–∞
      obstacles: [],
      items: []
    }
  ],
  houses: [
    {
      id: 'house_player_123',
      ownerId: 'player_123',
      ownerName: 'Vasya',
      position: { x: 500, y: 800 },
      biome: 'FOREST',
      security: {
        lockType: 'simple', // simple | digital | alarm
        level: 1,
        traps: []
      },
      treasures: {
        coins: 100,
        jewels: 5
      },
      ownerOnline: false
    }
  ],
  playerHouse: {
    id: 'house_player_current',
    position: { x: 1500, y: 1500 } // –¶–µ–Ω—Ç—Ä –º–∏—Ä–∞
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º**:
- `GeometryUtils` - —Ä–∞—Å—á–µ—Ç—ã –≥–µ–æ–º–µ—Ç—Ä–∏–∏
- `BackgroundUtils` - —Ñ–æ–Ω –±–∏–æ–º–æ–≤

---

### 1.2 –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∏—Ä–∞ (WorldRenderer)

**–¶–µ–ª—å**: –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –º–∏—Ä–∞ —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π –∫–∞–º–µ—Ä—ã

**–õ–æ–∫–∞—Ü–∏—è**: `src/systems/world/WorldRenderer.js`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- –ö–∞–º–µ—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –º–∏—Ä–∞ (bounds)
- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–∏–æ–º–æ–≤
- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∂–∏–ª–∏—â

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Phaser Camera
- ‚úÖ Follow –∫–∞–º–µ—Ä—ã –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º
- ‚úÖ Bounds –º–∏—Ä–∞
- ‚úÖ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–∞–π–ª–æ–≤ –±–∏–æ–º–æ–≤
- ‚úÖ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ (–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è, –∂–∏–ª–∏—â–∞)
- ‚úÖ –ú–∏–Ω–∏-–∫–∞—Ä—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞ –±—É–¥—É—â–µ–µ)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Phaser**:
```javascript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã
this.cameras.main.setBounds(0, 0, world.size.width, world.size.height);
this.cameras.main.startFollow(pet, true, 0.1, 0.1);
this.cameras.main.setZoom(1);
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º**:
- `BackgroundUtils.createAnimatedGrassBackground()` - –¥–ª—è —Ç—Ä–∞–≤—è–Ω—ã—Ö –±–∏–æ–º–æ–≤
- `DEPTH_CONSTANTS` - –≥–ª—É–±–∏–Ω–∞ –æ–±—ä–µ–∫—Ç–æ–≤

---

### 1.3 –ü–∏—Ç–æ–º–µ—Ü –∏–≥—Ä–æ–∫–∞ (Pet)

**–¶–µ–ª—å**: –£–ø—Ä–∞–≤–ª—è–µ–º—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º

**–õ–æ–∫–∞—Ü–∏—è**: `src/objects/Pet.js`

**–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å**: `GameObject`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
- ‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –º–∏—Ä—É
- ‚úÖ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–º–æ–Ω–µ—Ç—ã, —Ü–µ–Ω–Ω–æ—Å—Ç–∏)
- ‚úÖ –ó–¥–æ—Ä–æ–≤—å–µ
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏

**–°–≤–æ–π—Å—Ç–≤–∞**:
```javascript
{
  speed: 150,
  texture: 'üêæ',
  spriteKey: 'pet',
  size: 2,
  health: 100,
  inventory: {
    coins: 0,
    keys: 0,
    lockpicks: 0, // –û—Ç–º—ã—á–∫–∏
    treasures: []
  },
  skills: {
    lockpicking: 0, // –ù–∞–≤—ã–∫ –≤–∑–ª–æ–º–∞
    stealth: 0,     // –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å
    tracking: 0     // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º**:
- `GameObject` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
- `MovementSystem` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `linear`
- `HealthBar` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è

---

### 1.4 –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–æ–º—Ü–µ–º (PetControlSystem)

**–¶–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ —Ç–∞–ø—É —Å –æ–±—Ö–æ–¥–æ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π

**–õ–æ–∫–∞—Ü–∏—è**: `src/systems/PetControlSystem.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–ø–∞ –ø–æ –º–∏—Ä—É
- ‚úÖ –†–∞—Å—á–µ—Ç –ø—É—Ç–∏ —Å –æ–±—Ö–æ–¥–æ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
- ‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ø—É—Ç–∏
- ‚úÖ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏:
  - –ú–æ–Ω–µ—Ç—ã ‚Üí –∞–≤—Ç–æ—Å–±–æ—Ä –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏
  - –ñ–∏–ª–∏—â–µ ‚Üí –≤—Ö–æ–¥ –≤–Ω—É—Ç—Ä—å
  - –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è ‚Üí –æ–±—Ö–æ–¥

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º**:
- `GestureSystem.onTap` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–ø–æ–≤
- `PathfindingSystem` - –ø–æ–∏—Å–∫ –ø—É—Ç–∏
- `MovementSystem` - –¥–≤–∏–∂–µ–Ω–∏–µ
- `GeometryUtils` - —Ä–∞—Å—á–µ—Ç—ã

**–õ–æ–≥–∏–∫–∞**:
```javascript
onTap(gesture) {
  const worldX = this.camera.scrollX + gesture.endX;
  const worldY = this.camera.scrollY + gesture.endY;
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∏–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç
  const clickedObject = this.getObjectAt(worldX, worldY);
  
  if (clickedObject) {
    if (clickedObject.type === 'house') {
      this.moveToAndEnter(clickedObject);
    } else if (clickedObject.type === 'coin') {
      this.moveToAndCollect(clickedObject);
    }
  } else {
    // –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
    this.moveTo(worldX, worldY);
  }
}
```

---

### 1.5 –ñ–∏–ª–∏—â–∞ –∏–≥—Ä–æ–∫–æ–≤ (House)

**–¶–µ–ª—å**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–æ–º–∞ —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ (–≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ + –∏–Ω—Ç–µ—Ä—å–µ—Ä)

**–õ–æ–∫–∞—Ü–∏—è**: `src/objects/House.js`

**–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å**: `GameObject`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- ‚úÖ –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ (—Å–ø—Ä–∞–π—Ç –¥–æ–º–∞ –Ω–∞ –∫–∞—Ä—Ç–µ)
- ‚úÖ –í—Ö–æ–¥ –≤ –¥–æ–º (—Å–º–µ–Ω–∞ —Å—Ü–µ–Ω—ã/—Ä–µ–∂–∏–º–∞)
- ‚úÖ –ò–Ω—Ç–µ—Ä—å–µ—Ä (–∫–æ–º–Ω–∞—Ç–∞ —Å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏)
- ‚úÖ –í–ª–∞–¥–µ–ª–µ—Ü (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–æ–∫–µ)
- ‚úÖ –ó–∞—â–∏—Ç–∞ (–∑–∞–º–∫–∏, –ª–æ–≤—É—à–∫–∏)

**–°–≤–æ–π—Å—Ç–≤–∞**:
```javascript
{
  ownerId: 'player_123',
  ownerName: 'Vasya',
  ownerOnline: false,
  position: { x: 500, y: 800 },
  biome: 'FOREST',
  
  security: {
    lockType: 'simple', // simple | digital | alarm
    level: 1,
    traps: [],
    cameras: false
  },
  
  interior: {
    layout: 'small', // small | medium | large
    treasures: [
      { type: 'coin', amount: 50, visible: true },
      { type: 'jewel', amount: 3, visible: true },
      { type: 'coin', amount: 50, visible: false } // –°—É–Ω–¥—É–∫ —Å –¥–≤–æ–π–Ω—ã–º –¥–Ω–æ–º
    ]
  },
  
  traces: [] // –°–ª–µ–¥ –µ—Å–ª–∏ –±—ã–ª–∞ –ø–æ–ø—ã—Ç–∫–∞ –∫—Ä–∞–∂–∏
}
```

---

### 1.6 –°—Ü–µ–Ω–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ –¥–æ–º–∞ (HouseInteriorScene)

**–¶–µ–ª—å**: –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ü–µ–Ω–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ–º–∞

**–õ–æ–∫–∞—Ü–∏—è**: `src/scenes/HouseInteriorScene.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- ‚úÖ –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–º–Ω–∞—Ç—ã
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—É–Ω–¥—É–∫–æ–≤ —Å —Ü–µ–Ω–Ω–æ—Å—Ç—è–º–∏
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–æ–≤—É—à–µ–∫
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
- ‚úÖ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏

**–ü–µ—Ä–µ—Ö–æ–¥**:
```javascript
// –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –¥–æ–º
this.scene.start('HouseInteriorScene', {
  houseData: house,
  returnPosition: { x: pet.x, y: pet.y }
});

// –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ
this.scene.start('PetThiefScene', {
  returnPosition: houseData.position
});
```

---

### 1.7 –ù–æ–≤–∞—è –∏–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞ (PetThiefScene)

**–¶–µ–ª—å**: –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –º–∏—Ä–∞

**–õ–æ–∫–∞—Ü–∏—è**: `src/scenes/PetThiefScene.js`

**–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å**: `Phaser.Scene`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```javascript
class PetThiefScene extends Phaser.Scene {
  constructor() {
    super({ key: 'PetThiefScene' });
  }
  
  create(data) {
    // 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è/–∑–∞–≥—Ä—É–∑–∫–∞ –º–∏—Ä–∞
    this.worldGenerator = new WorldGenerator(seed);
    this.world = data.world || this.worldGenerator.generate();
    
    // 2. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∏—Ä–∞
    this.worldRenderer = new WorldRenderer(this, this.world);
    this.worldRenderer.render();
    
    // 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
    const startPos = data.returnPosition || this.world.playerHouse.position;
    this.pet = Pet.CreatePet(this, startPos.x, startPos.y);
    
    // 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã
    this.setupCamera();
    
    // 5. –°–∏—Å—Ç–µ–º—ã
    this.eventSystem = new EventSystem();
    this.petControlSystem = new PetControlSystem(this, this.pet);
    this.obstacleInteractionSystem = new ObstacleInteractionSystem(this);
    
    // 6. –°–æ–∑–¥–∞–Ω–∏–µ –∂–∏–ª–∏—â
    this.createHouses();
    
    // 7. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–Ω–µ—Ç
    this.createCoins();
    
    // 8. UI
    this.setupUI();
    
    // 9. –°–æ–±—ã—Ç–∏—è
    this.setupEvents();
  }
  
  setupCamera() {
    this.cameras.main.setBounds(0, 0, this.world.size.width, this.world.size.height);
    this.cameras.main.startFollow(this.pet, true, 0.1, 0.1);
    this.cameras.main.setZoom(1);
  }
  
  update(time, delta) {
    this.petControlSystem.update(time, delta);
    this.worldRenderer.update(time, delta);
  }
}
```

---

## üóÇÔ∏è –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
```
src/
‚îú‚îÄ‚îÄ scenes/
‚îÇ   ‚îú‚îÄ‚îÄ PetThiefScene.js           # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –º–∏—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ HouseInteriorScene.js      # –°—Ü–µ–Ω–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ –¥–æ–º–∞
‚îú‚îÄ‚îÄ objects/
‚îÇ   ‚îú‚îÄ‚îÄ Pet.js                     # –ö–ª–∞—Å—Å –ø–∏—Ç–æ–º—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ House.js                   # –ö–ª–∞—Å—Å –∂–∏–ª–∏—â–∞
‚îú‚îÄ‚îÄ systems/
‚îÇ   ‚îú‚îÄ‚îÄ world/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WorldGenerator.js      # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –º–∏—Ä–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WorldRenderer.js       # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∏—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ PetControlSystem.js        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–µ–º
‚îî‚îÄ‚îÄ types/
    ‚îú‚îÄ‚îÄ worldTypes.js              # –¢–∏–ø—ã –±–∏–æ–º–æ–≤, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ houseTypes.js              # –¢–∏–ø—ã –∂–∏–ª–∏—â, –∑–∞—â–∏—Ç—ã
```

---

## üìä –≠–¢–ê–ü–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò

### ‚úÖ **–§–∞–∑–∞ 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø** (–¢–µ–∫—É—â–∞—è)

**–¶–µ–ª—å**: –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç —Ö–æ–¥–∏—Ç—å –ø–æ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –º–∏—Ä—É –∏ —Å–æ–±–∏—Ä–∞—Ç—å –º–æ–Ω–µ—Ç—ã

1. ‚úÖ WorldGenerator - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –º–∏—Ä–∞ (–æ–¥–∏–Ω –±–∏–æ–º - —Ç—Ä–∞–≤–∞)
2. ‚úÖ WorldRenderer - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–∏—Ä–∞
3. ‚úÖ Pet - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
4. ‚úÖ PetControlSystem - –∫–ª–∏–∫ ‚Üí –¥–≤–∏–∂–µ–Ω–∏–µ
5. ‚úÖ Camera - —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º
6. ‚úÖ –ú–æ–Ω–µ—Ç—ã - —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∏ —Å–±–æ—Ä
7. ‚úÖ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å UI - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
8. ‚úÖ PetThiefScene - —Å–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –≤–º–µ—Å—Ç–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–∂–Ω–æ —Ö–æ–¥–∏—Ç—å, —Å–æ–±–∏—Ä–∞—Ç—å –º–æ–Ω–µ—Ç—ã, –≤–∏–¥–µ—Ç—å –º–∏—Ä

---

### üîÑ **–§–∞–∑–∞ 2: –ñ–∏–ª–∏—â–∞ –∏ –±–∞–∑–æ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ**

**–¶–µ–ª—å**: –ú–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –≤ –¥–æ–º –∏ —É–≤–∏–¥–µ—Ç—å —Ü–µ–Ω–Ω–æ—Å—Ç–∏

9. ‚úÖ House - –æ–±—ä–µ–∫—Ç –∂–∏–ª–∏—â–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
10. ‚úÖ HouseInteriorScene - —Å—Ü–µ–Ω–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞
11. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –≤–Ω—É—Ç—Ä—å/–Ω–∞—Ä—É–∂—É –¥–æ–º–∞
12. ‚úÖ –°—É–Ω–¥—É–∫–∏ —Å —Ü–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –≤ –¥–æ–º–µ
13. ‚úÖ –ü—Ä–æ—Å—Ç–æ–π —Å–±–æ—Ä —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π (–±–µ–∑ –∑–∞—â–∏—Ç—ã)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ –¥–æ–º –∏ –≤–∑—è—Ç—å —Ü–µ–Ω–Ω–æ—Å—Ç–∏

---

### üîê **–§–∞–∑–∞ 3: –°–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—Ç—ã –∏ –≤–∑–ª–æ–º–∞**

**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–º–∫–∏ –∏ –º–∏–Ω–∏-–∏–≥—Ä—É –≤–∑–ª–æ–º–∞

14. ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∑–∞–º–æ–∫ –Ω–∞ –¥–≤–µ—Ä–∏
15. ‚úÖ –ú–∏–Ω–∏-–∏–≥—Ä–∞ –≤–∑–ª–æ–º–∞ (–ø–æ–¥–±–æ—Ä –ø–∏–Ω–æ–≤)
16. ‚úÖ –û—Ç–º—ã—á–∫–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
17. ‚úÖ –¶–∏—Ñ—Ä–æ–≤–æ–π –∑–∞–º–æ–∫
18. ‚úÖ –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –∑–∞–º–∫–∞ (–ø—è—Ç–Ω–∞—à–∫–∏)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù—É–∂–Ω–æ –≤–∑–ª–æ–º–∞—Ç—å –∑–∞–º–æ–∫ —á—Ç–æ–±—ã –≤–æ–π—Ç–∏

---

### üë£ **–§–∞–∑–∞ 4: –°–∏—Å—Ç–µ–º–∞ —Å–ª–µ–¥–æ–≤ –∏ –≤–æ–∑–º–µ–∑–¥–∏—è**

**–¶–µ–ª—å**: –°–ª–µ–¥—ã –ø–æ—Å–ª–µ –∫—Ä–∞–∂–∏, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–µ—Å—Ç–∏

19. ‚úÖ –°–ª–µ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–π –∫—Ä–∞–∂–∏
20. ‚úÖ –ü–æ–∫–∞–∑ —Å–ª–µ–¥–∞ –¥–æ –¥–æ–º–∞ –≤–æ—Ä–∞
21. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í—ã—Å–ª–µ–¥–∏—Ç—å –≤–æ—Ä–∞"
22. ‚úÖ –¢–µ–ª–µ–ø–æ—Ä—Ç –∫ –¥–æ–º—É –≤–æ—Ä–∞
23. ‚úÖ –û—Ç–≤–µ—Ç–Ω–∞—è –∫—Ä–∞–∂–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö—Ä—É–≥–æ–≤–æ—Ä–æ—Ç –≤–æ—Ä–æ–≤ –∏ –∂–µ—Ä—Ç–≤

---

### üåç **–§–∞–∑–∞ 5: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–æ–º—ã**

**–¶–µ–ª—å**: –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –º–∏—Ä–∞

24. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∏–æ–º–æ–≤ (Perlin noise)
25. ‚úÖ –†–∞–∑–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã –¥–ª—è –±–∏–æ–º–æ–≤
26. ‚úÖ –ë–∏–æ–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
27. ‚úÖ –ñ–∏–ª–∏—â–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∏–æ–º—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –º–∏—Ä

---

### üéÆ **–§–∞–∑–∞ 6: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞**

**–¶–µ–ª—å**: –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–∑ Notion

28. ‚úÖ –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram)
29. ‚úÖ –õ–æ–≤—É—à–∫–∏ –≤ –¥–æ–º–∞—Ö
30. ‚úÖ –ü—Ä–µ–¥–º–µ—Ç—ã (–ø—É—à–∏—Å—Ç—ã–π —Ö–≤–æ—Å—Ç, –¥—ã–º–æ–≤–∞—è —à–∞—à–∫–∞)
31. ‚úÖ –ü–æ–≥–æ–¥–∞ (–¥–æ–∂–¥—å, —Ç—É–º–∞–Ω)
32. ‚úÖ –í—Ä–µ–º—è —Å—É—Ç–æ–∫
33. ‚úÖ –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
34. ‚úÖ –†–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ (—Ç—Ä–∏ –ø—É—Ç–∏)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è –∏–≥—Ä–∞ –∫–∞–∫ –≤ Notion

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏—Ä–∞ (Perlin Noise)

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö –±–∏–æ–º–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É noise:

```javascript
import { createNoise2D } from 'simplex-noise';

const noise2D = createNoise2D();

function getBiome(x, y) {
  const temperature = noise2D(x / 500, y / 500);
  const humidity = noise2D((x + 1000) / 500, (y + 1000) / 500);
  
  if (temperature > 0.5) return 'DESERT';
  if (temperature < -0.5 && humidity < 0) return 'SNOW';
  if (humidity > 0.3) return 'FOREST';
  return 'PLAINS';
}
```

### –°–æ–±—ã—Ç–∏—è

**EventSystem** - –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:
- `WORLD_GENERATED` - –º–∏—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- `PET_MOVE_START` - –ø–∏—Ç–æ–º–µ—Ü –Ω–∞—á–∞–ª –¥–≤–∏–∂–µ–Ω–∏–µ
- `PET_MOVE_COMPLETE` - –ø–∏—Ç–æ–º–µ—Ü –¥–æ—Å—Ç–∏–≥ —Ü–µ–ª–∏
- `COIN_COLLECTED` - –º–æ–Ω–µ—Ç–∞ —Å–æ–±—Ä–∞–Ω–∞
- `HOUSE_ENTERED` - –≤—Ö–æ–¥ –≤ –¥–æ–º
- `HOUSE_EXITED` - –≤—ã—Ö–æ–¥ –∏–∑ –¥–æ–º–∞
- `LOCKPICKING_START` - –Ω–∞—á–∞–ª–æ –≤–∑–ª–æ–º–∞
- `LOCKPICKING_SUCCESS` - —É—Å–ø–µ—à–Ω—ã–π –≤–∑–ª–æ–º
- `LOCKPICKING_FAILED` - –ø—Ä–æ–≤–∞–ª –≤–∑–ª–æ–º–∞
- `TREASURE_STOLEN` - —Ü–µ–Ω–Ω–æ—Å—Ç—å —É–∫—Ä–∞–¥–µ–Ω–∞
- `TRAP_TRIGGERED` - –ª–æ–≤—É—à–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
- `TRACE_LEFT` - —Å–ª–µ–¥ –æ—Å—Ç–∞–≤–ª–µ–Ω
- `OWNER_RETURNED` - –≤–ª–∞–¥–µ–ª–µ—Ü –≤–µ—Ä–Ω—É–ª—Å—è

---

## üé® –í–ò–ó–£–ê–õ–¨–ù–´–ô –°–¢–ò–õ–¨

### –ë–∏–æ–º—ã:
- **FOREST** üå≤: –ó–µ–ª–µ–Ω—ã–π —Ç—Ä–∞–≤—è–Ω–æ–π —Ñ–æ–Ω, –¥–µ—Ä–µ–≤—å—è, –∫—É—Å—Ç—ã
- **DESERT** üèúÔ∏è: –ü–µ—Å–æ—á–Ω—ã–π —Ñ–æ–Ω, –∫–∞–∫—Ç—É—Å—ã, –∫–∞–º–Ω–∏
- **SNOW** ‚ùÑÔ∏è: –ë–µ–ª—ã–π —Å–Ω–µ–∂–Ω—ã–π —Ñ–æ–Ω, –µ–ª–∫–∏, —Å—É–≥—Ä–æ–±—ã
- **PLAINS** üåæ: –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω, —Ü–≤–µ—Ç—ã, —Ç—Ä–∞–≤–∞

### –ñ–∏–ª–∏—â–∞:
- **FOREST**: –î–µ—Ä–µ–≤—è–Ω–Ω–∞—è –∏–∑–±—É—à–∫–∞ üè°
- **DESERT**: –ì–ª–∏–Ω—è–Ω—ã–π –¥–æ–º üè†
- **SNOW**: –ò–≥–ª—É ‚õ∫
- **PLAINS**: –§–µ—Ä–º–µ—Ä—Å–∫–∏–π –¥–æ–º–∏–∫ üèòÔ∏è

---

## ‚ùì –í–û–ü–†–û–°–´ –ò –†–ï–®–ï–ù–ò–Ø

### ‚úÖ 1. –†–∞–∑–º–µ—Ä –º–∏—Ä–∞
**–†–µ—à–µ–Ω–∏–µ**: 3000x3000 –ø–∏–∫—Å–µ–ª–µ–π (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è)

### ‚úÖ 2. –ö–∞–º–µ—Ä–∞
**–†–µ—à–µ–Ω–∏–µ**: –°–ª–µ–¥—É–µ—Ç –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º —Å –ø–ª–∞–≤–Ω–æ—Å—Ç—å—é 0.1

### ‚úÖ 3. –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –¥–æ–º–∞–º–∏
**–†–µ—à–µ–Ω–∏–µ**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞ —Å—Ü–µ–Ω—ã

### ‚úÖ 4. –¢–∏–ø –º–∏—Ä–∞
**–†–µ—à–µ–Ω–∏–µ**: –û—Ç–∫—Ä—ã—Ç—ã–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—É—Ç–µ–π, –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

### ‚úÖ 5. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
**–†–µ—à–µ–Ω–∏–µ**: –¢—Ä–∞–≤—è–Ω–æ–π —Ñ–æ–Ω + —Ç–µ–∫—Å—Ç—É—Ä—ã/—Å–ø—Ä–∞–π—Ç—ã –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤

### ‚úÖ 6. –í—Ä–∞–≥–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü–æ–∫–∞ –±–µ–∑ –≤—Ä–∞–≥–æ–≤

### ‚úÖ 7. –ü—Ä–µ–¥–º–µ—Ç—ã
**–†–µ—à–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç—ã –¥–ª—è –Ω–∞—á–∞–ª–∞

### ‚úÖ 8. –ñ–∏–ª–∏—â–∞
**–†–µ—à–µ–Ω–∏–µ**: 3-8 –∂–∏–ª–∏—â, –≤—Ö–æ–¥ ‚Üí —Å–º–µ–Ω–∞ —Å—Ü–µ–Ω—ã –Ω–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä

---

## üöÄ –ù–ê–ß–ò–ù–ê–ï–ú –° –§–ê–ó–´ 1

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –≤–∫–ª—é—á–∞–µ—Ç:

1. **WorldGenerator** - –ø—Ä–æ—Å—Ç–æ–π –º–∏—Ä —Å —Ç—Ä–∞–≤–æ–π
2. **WorldRenderer** - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
3. **Pet** - –ø–∏—Ç–æ–º–µ—Ü
4. **PetControlSystem** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
5. **Camera** - —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
6. **Coins** - —Å–±–æ—Ä –º–æ–Ω–µ—Ç
7. **UI** - –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 2-3 —á–∞—Å–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –º–∏—Ä–æ–º

---

**–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω –≥–æ—Ç–æ–≤ ‚úÖ  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∏–ø–æ–≤ –∏ –Ω–∞—á–∞–ª–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è



