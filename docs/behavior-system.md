# ü§ñ –°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–π –≤—Ä–∞–≥–æ–≤ (Behavior System)

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–π –≤—Ä–∞–≥–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ä–∞–≥–∞. –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
src/
‚îú‚îÄ‚îÄ behaviors/
‚îÇ   ‚îú‚îÄ‚îÄ BaseBehavior.js      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ LinearBehavior.js    # –õ–∏–Ω–µ–π–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—Ä–∞–≥–∏)
‚îÇ   ‚îú‚îÄ‚îÄ RangedBehavior.js    # –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–æ—Å–∞)
‚îÇ   ‚îî‚îÄ‚îÄ StealthBehavior.js   # –°–∫—Ä—ã—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (—Å–ª–∏–∑–µ–Ω—å)
‚îú‚îÄ‚îÄ effects/
‚îÇ   ‚îî‚îÄ‚îÄ EnemyEffectSystem.js # –°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
‚îî‚îÄ‚îÄ objects/
    ‚îî‚îÄ‚îÄ Enemy.js             # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –≤—Ä–∞–≥–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–≤–µ–¥–µ–Ω–∏–π
```

### –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:

```mermaid
graph TD
    A[Enemy] -->|—Å–æ–∑–¥–∞–µ—Ç| B[BaseBehavior]
    B -->|–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è| C[LinearBehavior]
    B -->|–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è| D[RangedBehavior]
    B -->|–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è| E[StealthBehavior]
    
    F[EnemyEffectSystem] -->|–ø—Ä–∏–º–µ–Ω—è–µ—Ç| G[–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã]
    A -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| F
    
    H[enemyTypes.js] -->|–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è| A
```

## üéÆ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è

### 1. LinearBehavior (–õ–∏–Ω–µ–π–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—Ä–∞–≥–∏ (–º—É—Ä–∞–≤–µ–π, –∂—É–∫, –º—É—Ö–∞, –ø—á–µ–ª–∞ –∏ —Ç.–¥.)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: 
  - –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏
  - –°–≥–ª–∞–∂–µ–Ω–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∞—Ç–∞–∫–∞ –≤ —Ä–∞–¥–∏—É—Å–µ

### 2. RangedBehavior (–î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –û—Å–∞
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –°—Ç—Ä–µ–ª—è–µ—Ç —Å–Ω–∞—Ä—è–¥–∞–º–∏ –∏–∑ –¥–∞–ª–µ–∫–∞
  - –ù–µ –¥–≤–∏–∂–µ—Ç—Å—è –∫ —Ü–µ–ª–∏
  - –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã—Å—Ç—Ä–µ–ª–∞
  - –í—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –∞—Ç–∞–∫–∏

### 3. StealthBehavior (–°–∫—Ä—ã—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –°–ª–∏–∑–µ–Ω—å
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - 95% –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (–∞–ª—å—Ñ–∞ 0.05)
  - –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞
  - –û—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥ —Å–ª–∏–∑–∏ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
  - –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —É—Ä–æ–Ω –ø—Ä–∏ –∞—Ç–∞–∫–µ –∏–∑ –∑–∞—Å–∞–¥—ã

## ‚ú® –°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### –¢–∏–ø—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:
- **damage** - –¢–µ–∫—Å—Ç —É—Ä–æ–Ω–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- **explosion** - –ß–∞—Å—Ç–∏—Ü—ã –≤–∑—Ä—ã–≤–∞ –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏
- **slimeTrail** - –°–ª–µ–¥ —Å–ª–∏–∑–∏ –¥–ª—è —Å–ª–∏–∑–Ω—è
- **teleport** - –≠—Ñ—Ñ–µ–∫—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –¥–ª—è –æ—Å—ã
- **stealth** - –û—Ä–µ–æ–ª —Å–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏
- **heal** - –≠—Ñ—Ñ–µ–∫—Ç –ª–µ—á–µ–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –õ–∏–º–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞ –≤—Ä–∞–≥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π –∏ —á–∞—Å—Ç–∏—Ü

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è:

```javascript
// 1. –°–æ–∑–¥–∞–µ–º –∫–ª–∞—Å—Å –ø–æ–≤–µ–¥–µ–Ω–∏—è
export class CustomBehavior extends BaseBehavior {
    constructor(enemy) {
        super(enemy);
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    }
    
    updateBehavior(time, delta) {
        // –õ–æ–≥–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
    }
}

// 2. –î–æ–±–∞–≤–ª—è–µ–º –≤ Enemy.js
getBehaviorClass(enemyType) {
    const behaviorMap = {
        'custom_enemy': CustomBehavior,
        // ... –¥—Ä—É–≥–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
    };
    return behaviorMap[enemyType] || LinearBehavior;
}
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:

```javascript
// –ò–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è
if (Enemy.effectSystem) {
    Enemy.effectSystem.applyEffect('explosion', this.enemy, {
        color: 0xff4444,
        size: 30,
        particleCount: 8
    });
}
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

### 1. **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ø—Ä–æ–µ–∫—Ç–∞**
- –ù–µ —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ä–∞–≥–∞
- –†–∞—Å—à–∏—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –°–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É DRY

### 2. **–ì–∏–±–∫–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**
- –ù–æ–≤—ã–π –≤—Ä–∞–≥ = –Ω–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ + –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –õ–µ–≥–∫–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã

### 3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ü–æ–≤–µ–¥–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### 4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ö–∞–∂–¥–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –õ–µ–≥–∫–æ –º–æ–∫–∞—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤

## üîß API

### BaseBehavior
```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
update(time, delta)           // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
moveToPosition(x, y)          // –î–≤–∏–∂–µ–Ω–∏–µ –∫ –ø–æ–∑–∏—Ü–∏–∏
stopMovement()                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
attackTarget()                // –ê—Ç–∞–∫–∞ —Ü–µ–ª–∏
setState(newState)            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
getBehaviorInfo()             // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏
```

### EnemyEffectSystem
```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
applyEffect(type, enemy, params)  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞
removeEnemyEffects(enemyId)       // –£–¥–∞–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤—Ä–∞–≥–∞
getStats()                         // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
cleanupOldEffects()                // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
```

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–≤–µ–¥–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ü–µ–Ω—É `TestBehaviors`:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É
2. –í—ã–±–µ—Ä–∏—Ç–µ "–¢–ï–°–¢ –ü–û–í–ï–î–ï–ù–ò–ô" –≤ –º–µ–Ω—é
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º —Ä–∞–∑–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
   - **SPACE** - –°–æ–∑–¥–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—Ä–∞–≥–∞
   - **R** - –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤
   - **–ö–ª–∏–∫** - –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ü–µ–ª—å
   - **ESC** - –í—ã—Ö–æ–¥ –≤ –º–µ–Ω—é

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –°–ª–µ–¥—É—é—â–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è:
1. **ChainBehavior** - –¶–µ–ø–æ—á–∫–∞ –º—É—Ä–∞–≤—å—ë–≤
2. **ShellBehavior** - –£–ª–∏—Ç–∫–∞ —Å —Ä–∞–∫–æ–≤–∏–Ω–æ–π
3. **SpawnerBehavior** - –°–∞–º–∫–∞ –ø–∞—É–∫–∞
4. **BurrowBehavior** - –ö—Ä–æ—Ç

### –£–ª—É—á—à–µ–Ω–∏—è:
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏–π
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ò–ò –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–≥–æ–ª–æ–¥, –∑–ª–æ—Å—Ç—å, —Å—Ç—Ä–∞—Ö)

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–π —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –≤—Ä–∞–≥–∞
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚úÖ –õ–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –í—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.
